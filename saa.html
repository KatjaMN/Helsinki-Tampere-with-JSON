<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initia-scale=1" />
    <meta name="keywords" content="">
    <meta name="description" content="JSON harjoitus">
    <meta name="author" content="Katja Maria Nyman">
    <title>JSON harjoitus osa 2</title>
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
</head>


<body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
            <!-- <a class="navbar-brand" href="index.html">KATJA MARIA NYMAN</a> -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">

                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Etusivu</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="saa.html">Säätiedot</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="tapahtumat.html">Tapahtumat</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="liikennekamera.html">Liikenne</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="junat.html">Junat</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>


    <div class="container-fluid ms-3 mt-3 me-2 mb-2">

        <h2>Säätietojen vertailu</h2>
        <br>

        <div class="row">
            
            <div class="col-md-auto me-5">
                <div id="vastaus">
                    <script>
                        fetch('https://api.openweathermap.org/data/2.5/weather?lang=fi&q=helsinki&units=metric&APPID=a0efc3eb0cb3da5886b634195232aced')
                            // Muunnetaan vastaus JSON muotoon 
                            .then(function (response) {
                                return response.json();
                            })
                            // Käsitellään muunnettu (eli JSON muotoinen) vastaus 
                            .then(function (responseJson) {
                                // Kutsutaan funktiota ja välitetään sille json-vastaus 
                                saa(responseJson);
                            })
                            // Jos tuli jokin virhe 
                            .catch(function (error) {
                                document.getElementById("vastaus").innerHTML =
                                    "<p>Tietoa ei pystytä hakemaan</p>";
                            })

                        function saa(data) {

                            var teksti = ""; // määritellään muuttuja, johon tulostettava tieto kerätään
                            var kuva = 'https://openweathermap.org/img/wn/' + data.weather[0].icon + '.png'; // kuvan haku

                            // otsikkotiedon hakeminen ja sijoittaminen h1-elementtiin

                            teksti = "<h3>" + data.name + "</h3>";

                            // tähän tulee muiden tietojen käsittely kohta
                            // teksti-muuttujan sisällön tulostus 

                            teksti = teksti + "<p>Sää: " + data.weather[0].description + "</p>";
                            teksti = teksti + "<p>Lämpötila " + data.main.temp + "&deg;C</p>";
                            teksti = teksti + "<p>Tuulen nopeus " + data.weather[0].description + " m/s</p>";

                            teksti = teksti + "<p><img src='" + kuva + "' alt='kuva' ></p>";

                            document.getElementById("vastaus").innerHTML = teksti;
                        }

                    </script>
                </div>
            </div>
            <div class="col-md-auto">
                <div id="vastaus2">
                    <script>
                        fetch('https://api.openweathermap.org/data/2.5/weather?lang=fi&q=tampere&units=metric&APPID=a0efc3eb0cb3da5886b634195232aced')
                            // Muunnetaan vastaus JSON muotoon 
                            .then(function (response) {
                                return response.json();
                            })
                            // Käsitellään muunnettu (eli JSON muotoinen) vastaus 
                            .then(function (responseJson) {
                                // Kutsutaan funktiota ja välitetään sille json-vastaus 
                                saa2(responseJson);
                            })
                            // Jos tuli jokin virhe 
                            .catch(function (error) {
                                document.getElementById("vastaus").innerHTML =
                                    "<p>Tietoa ei pystytä hakemaan</p>";
                            })

                        function saa2(data) {
                            var teksti = ""; // määritellään muuttuja, johon tulostettava tieto kerätään
                            var kuva = 'https://openweathermap.org/img/wn/' + data.weather[0].icon + '.png'; // kuvan haku

                            // otsikkotiedon hakeminen ja sijoittaminen h1-elementtiin

                            teksti = "<h3>" + data.name + "</h3>";

                            // tähän tulee muiden tietojen käsittely kohta
                            // teksti-muuttujan sisällön tulostus 

                            teksti = teksti + "<p>Sää: " + data.weather[0].description + "</p>";
                            teksti = teksti + "<p>Lämpötila " + data.main.temp + "&deg;C</p>";
                            teksti = teksti + "<p>Tuulen nopeus " + data.weather[0].description + " m/s</p>";

                            teksti = teksti + "<p><img src='" + kuva + "' alt='kuva' ></p>";

                            document.getElementById("vastaus2").innerHTML = teksti;
                        }
                    </script>
                </div>


            </div>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"
        integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD"
        crossorigin="anonymous"></script>
</body>

</html>
